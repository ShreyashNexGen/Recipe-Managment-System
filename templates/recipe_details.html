{% extends "base.html" %}

{% block title %}Recipe Details{% endblock %}

{% block content %}

<div class="content-header">
    <h1>Recipe Details for Recipe ID: {{ recipe_details[0][13] }}</h1>  <!-- Adjust index as needed -->
    <button id="start-recipe-btn" class="add-button">
        <i class="fas fa-play"></i> Start Recipe 
    </button>
</div>

<div id="details-section" class="details-section" >
    <h2>Recipe Details</h2>
    <table class="details-table" overflow-x: auto; /* Enable horizontal scrolling */ >
        <thead style="overflow-x: auto; overflow-y: hidden;">
            <tr>
                <th>Id</th><th>Pos1</th><th>Pos2</th><th>Pos3</th>
                <th>Pos4</th><th>Pos5</th><th>Pos6</th><th>Pos7</th>
                <th>Pos8</th><th>Pos9</th><th>Alu Coil Width</th>
                <th>Alu Roller Type</th><th>Spacer</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ recipe_details[0][0] }}</td>  <!-- Adjust index as needed -->
                <td>{{ recipe_details[0][1] }}</td>  <!-- Assuming Pos1 is at index 1 -->
                <td>{{ recipe_details[0][2] }}</td>  <!-- Pos2 at index 2 -->
                <td>{{ recipe_details[0][3] }}</td>  <!-- Pos3 at index 3 -->
                <td>{{ recipe_details[0][4] }}</td>  <!-- Pos4 at index 4 -->
                <td>{{ recipe_details[0][5] }}</td>  <!-- Pos5 at index 5 -->
                <td>{{ recipe_details[0][6] }}</td>  <!-- Pos6 at index 6 -->
                <td>{{ recipe_details[0][7] }}</td>  <!-- Pos7 at index 7 -->
                <td>{{ recipe_details[0][8] }}</td>  <!-- Pos8 at index 8 -->
                <td>{{ recipe_details[0][9] }}</td>  <!-- Pos9 at index 9 -->
                <td>{{ recipe_details[0][11] }}</td> <!-- Alu_Coil_Width at index 11 -->
                <td>{{ recipe_details[0][12] }}</td> <!-- Alu_Roller_Type at index 12 -->
                <td>{{ recipe_details[0][13] }}</td> <!-- Spacer at index 13 -->
            </tr>
        </tbody>
    </table>
</div>

<div id="submenu-section" class="submenu-section">
    <h2>Sub Menu</h2>
    <table class="details-table">
        <thead>
            <tr>
                <th>Motor Speed</th>
                <th>Motor Stroke</th>
                <th>Other Speed Force</th>
                <th>Alu Coil Width</th>
                <th>Corr1 Feed Length</th>
                <th>Corr2 Feed Length</th>
            </tr>
            <tr>
                <td>{{ sub_menu['motor_speed'] }}</td>
                <td>{{ sub_menu['motor_stroke'] }}</td>
                <td>{{ sub_menu['other_speed_force'] }}</td>
                <td>{{ sub_menu['alu_coil_width'] }}</td>
                <td>{{ sub_menu['Corr1Feed_length'] }}</td>
                <td>{{ sub_menu['Corr2feed_length'] }}</td>
                
            </tr>
            <tr>
                <th>Pleat Height</th>
                <th>Blade Opening</th>
                <th>Left Blade Media Thickness</th>
                <th>Right Blade Media Thickness</th>
                <th>Soft Touch</th>
                <th>Press Touch</th>
            </tr>
            <tr>
                <td>{{ sub_menu['Pleat_Height'] }}</td>
                <td>{{ sub_menu['Blade_opening'] }}</td>
                <td>{{ sub_menu['Left_Blade_MediaTHickness'] }}</td>
                <td>{{ sub_menu['Right_Blade_MediaThickness'] }}</td>
                <td>{{ sub_menu['Soft_Touch'] }}</td>
                <td>{{ sub_menu['Press_Touch'] }}</td>
            </tr>
            </tr>
            <tr>
                <th>Puller Start Position</th>
                <th>Puller End Position</th>
                <th>Puller2 Feed Correction</th>
                <th>Filter Box Height</th>
                <th>Filter Box Width</th>
                <th>Filter Box Length</th>
            </tr>
            <tr>
                
                <td>{{ sub_menu['Puller_Start_pos'] }}</td>
                <td>{{ sub_menu['Puller_End_pos'] }}</td>
                <td>{{ sub_menu['Puller2_Feed_Correction'] }}</td>
                <td>{{ sub_menu['Filter_Box_Height'] }}</td>
                <td>{{ sub_menu['Filter_Box_Width'] }}</td>
                <td>{{ sub_menu['Filter_Box_Length'] }}</td>
            </tr>
            <tr>
                <th>Set Pleat Count</th>
                <th>Set Pleat Pitch</th>
                <th>Set Batch Count</th>
                <th>Machine Speed Reference</th>
                <th>Decoiler Set Point</th>
                <th>Low Dia Set</th>
            </tr>
            <tr>
                <td>{{ sub_menu['Set_Pleat_Count'] }}</td>
                <td>{{ sub_menu['Set_Pleat_Pitch'] }}</td>
                <td>{{ sub_menu['Set_Batch_COunt'] }}</td>
                <td>{{ sub_menu['Machine_Speed_Ref'] }}</td>
                <td>{{ sub_menu['Decoiler_Set_point'] }}</td>
                <td>{{ sub_menu['Low_Dia_Set'] }}</td>
                </tr>
                <tr>
                    <th>Cutter Park Position</th>
                <th>Cutter Forward Position</th>
                </tr>
                <tr>
                    <td>{{ sub_menu['Cutter_Park_pos'] }}</td>
                <td>{{ sub_menu['Cutter_Fwd_Pos'] }}</td>
            
                </tr>
        </tbody>
        
    </table>
</div>


<!-- Custom Modal for POS Value Comparison -->
<div id="comparisonModal" class="custom-modal popup">
    <div class="custom-modal-content">
        <div class="custom-modal-header">
            <h3>POS Value Comparison</h3>
            <button type="button" class="btn-close" onclick="closeCustomModal()">X</button>
        </div>
        <div class="custom-modal-body">
            <ul id="comparisonResults" class="list-group">
                <!-- Comparison results will be dynamically populated here -->
            </ul>
        </div>
        <div class="custom-modal-footer">
            <button type="button" class="btn btn-secondary" onclick="closeCustomModal()">Close</button>
            <button id="next" type="button" class="btn btn-primary" disabled>Next</button>
        </div>
    </div>
</div>
<!-- Submenu Popup for Recipe Settings -->
<div id="recipe-popup" class="popup">
    <div class="popup-content">
        <div class="popup-header">
            <h3>Recipe ID: <span id="recipe-Id">{{sub_menu.Recipe_ID}}</span></h3>
            <button type="button" class="close-button" onclick="toggleRecipePopup()">X</button>
        </div>

        <div class="popup-body" style="max-height: 600px; overflow-y: auto;">
            <h2>Production Details</h2>
            <table class="details-table1">
                <tr>
                    <td>Quantity:</td>
                    <td><input type="text" id="quantity" placeholder="Enter Quantity" value=""></td>
                    <td>Motor Speed:</td>
                    <td><input type="text" id="motor-speed" value="{{ sub_menu.motor_speed }}" readonly></td>
                    <td>Motor Stroke:</td>
                    <td><input type="text" id="motor-stroke" value="{{ sub_menu.motor_stroke }}" readonly></td>
                    <td>Other Speed Force:</td>
                    <td><input type="text" id="speed-force" value="{{ sub_menu.other_speed_force }}" readonly></td>
                </tr>
                <tr>
                    <td>Alu Coil Width:</td>
                    <td><input type="text" id="coil-width" value="{{ sub_menu.alu_coil_width }}" readonly></td>
                    <td>Corr1 Feed Length:</td>
                    <td><input type="text" id="corr1-feed-length" value="{{ sub_menu.Corr1Feed_length }}" readonly></td>
                    <td>Corr2 Feed Length:</td>
                    <td><input type="text" id="corr2-feed-length" value="{{ sub_menu.Corr2feed_length }}" readonly></td>
                    <td>Pleat Height:</td>
                    <td><input type="text" id="pleat-height" value="{{ sub_menu.Pleat_Height }}" readonly></td>
                </tr>
                <tr>
                    <td>Blade Opening:</td>
                    <td><input type="text" id="blade-opening" value="{{ sub_menu.Blade_opening }}" readonly></td>
                    <td>Left Blade Media Thickness:</td>
                    <td><input type="text" id="left-blade-media-thickness" value="{{ sub_menu.Left_Blade_MediaTHickness }}" readonly></td>
                    <td>Right Blade Media Thickness:</td>
                    <td><input type="text" id="right-blade-media-thickness" value="{{ sub_menu.Right_Blade_MediaThickness }}" readonly></td>
                    <td>Soft Touch:</td>
                    <td><input type="text" id="soft-touch" value="{{ sub_menu.Soft_Touch }}" readonly></td>
                </tr>
                <tr>
                    <td>Press Touch:</td>
                    <td><input type="text" id="press-touch" value="{{ sub_menu.Press_Touch }}" readonly></td>
                    <td>Puller Start Position:</td>
                    <td><input type="text" id="puller-start-pos" value="{{ sub_menu.Puller_Start_pos }}" readonly></td>
                    <td>Puller End Position:</td>
                    <td><input type="text" id="puller-end-pos" value="{{ sub_menu.Puller_End_pos }}" readonly></td>
                    <td>Puller2 Feed Correction:</td>
                    <td><input type="text" id="puller2-feed-correction" value="{{ sub_menu.Puller2_Feed_Correction }}" readonly></td>
                </tr>
                <tr>
                    <td>Filter Box Height:</td>
                    <td><input type="text" id="filter-box-height" value="{{ sub_menu.Filter_Box_Height }}" readonly></td>
                    <td>Filter Box Width:</td>
                    <td><input type="text" id="filter-box-width" value="{{ sub_menu.Filter_Box_Width }}" readonly></td>
                    <td>Filter Box Length:</td>
                    <td><input type="text" id="filter-box-length" value="{{ sub_menu.Filter_Box_Length }}" readonly></td>
                    <td>Set Pleat Count:</td>
                    <td><input type="text" id="set-pleat-count" value="{{ sub_menu.Set_Pleat_Count }}" readonly></td>
                </tr>
                <tr>
                    <td>Set Pleat Pitch:</td>
                    <td><input type="text" id="set-pleat-pitch" value="{{ sub_menu.Set_Pleat_Pitch }}" readonly></td>
                    <td>Set Batch Count:</td>
                    <td><input type="text" id="set-batch-count" value="{{ sub_menu.Set_Batch_COunt }}" readonly></td>
                    <td>Machine Speed Reference:</td>
                    <td><input type="text" id="machine-speed-ref" value="{{ sub_menu.Machine_Speed_Ref }}" readonly></td>
                    <td>Decoiler Set Point:</td>
                    <td><input type="text" id="decoiler-set-point" value="{{ sub_menu.Decoiler_Set_point }}" readonly></td>
                </tr>
                <tr>
                    <td>Low Dia Set:</td>
                    <td><input type="text" id="low-dia-set" value="{{ sub_menu.Low_Dia_Set }}" readonly></td>
                    <td>Cutter Park Position:</td>
                    <td><input type="text" id="cutter-park-pos" value="{{ sub_menu.Cutter_Park_pos }}" readonly></td>
                    <td>Cutter Forward Position:</td>
                    <td><input type="text" id="cutter-fwd-pos" value="{{ sub_menu.Cutter_Fwd_Pos }}" readonly></td>
                </tr>
            </table>
            
            
            <div class="popup-footer">
                <button id="final_submit" type="button"  class="start-button" onclick="startRecipe('{{ sub_menu.Recipe_ID }}')" >Start</button>
            </div>
        </div>

       
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        // const barcodeValue = "{{ barcode_value }}"; // Pass barcode value from Flask
        const posValues = JSON.parse('{{ pos_values | tojson | safe }}');
        const comparisonResults = document.getElementById('comparisonResults');
        const next = document.getElementById('next');

        let matchedPosCount = 0;

        function openComparisonModal() {
            // Clear previous results
            comparisonResults.innerHTML = '';
            matchedPosCount = 0; // Reset the matched count

            // Create comparison option for each POS value
            posValues.forEach((posValue, index) => {
                const li = document.createElement('li');
                li.className = 'list-group-item d-flex justify-content-between align-items-center';

                // Add index (POS1, POS2, ...) and value to each POS
                //  Received Value: ${barcodeValue}
                const posText = `POS${index + 1} : ${posValue !== null ? posValue : "Unavailable"} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`;

                // Add text content
                const textSpan = document.createElement('span');
                textSpan.innerHTML = posText;
                li.appendChild(textSpan);

                // Only add compare button for non-null values
                if (posValue !== null) {
                    const compareButton = document.createElement('button');
                    compareButton.className = 'btn btn-primary btn-sm';
                    compareButton.textContent = 'Compare';
                    compareButton.addEventListener('click', () => comparePosValue(posValue, index));

                    li.appendChild(compareButton);
                }

                comparisonResults.appendChild(li);
            });

             // Show the modal
             const modal = document.getElementById('comparisonModal');
            modal.style.display = 'block'; // Show the modal
        }
    // Function to close the custom modal
    function closeCustomModal() {
            const modal = document.getElementById('comparisonModal');
            modal.style.display = 'none'; // Hide the modal
        }
        function comparePosValue(posValue, index) {
            // Compare the POS value with the barcode
            fetch('/compare-pos', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ posValue})
            })
            .then(response => response.json())
            .then(result => {
                const li = comparisonResults.children[index];
                const compareButton = li.querySelector('button');
                const isMatch = result.match;

                if (isMatch) {
                    li.classList.add('list-group-item-success');
                    li.classList.remove('list-group-item-danger');
                    li.querySelector('span').innerHTML = `POS${index + 1} : ${posValue} ✔ Match &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`;
                    matchedPosCount++;
                } else {
                    li.classList.add('list-group-item-danger');
                    li.classList.remove('list-group-item-success');
                    li.querySelector('span').innerHTML = `POS${index + 1} : ${posValue} ✘ Mismatch &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`;
                }

                // Disable the button after comparison
                compareButton.disabled = true;

                // Enable the "Start Recipe" button only if all available POS values are matched
                if (matchedPosCount === posValues.filter(posValue => posValue !== null).length) {
                    next.disabled = false;
                } else {
                    next.disabled = true;
                }
            })
            .catch(error => {
                console.error('Error comparing POS value:', error);
                alert('An error occurred during the comparison.');
            });
        }

        // Attach openComparisonModal to the start recipe button
        document.getElementById('start-recipe-btn').addEventListener('click', openComparisonModal);
        document.getElementById('comparisonModal').addEventListener('hidden.bs.modal', function () {
            matchedPosCount = 0; // Reset the matched count
            next.disabled = true; // Disable the Start Recipe button
        });
 // Attach closeCustomModal to the cross button
 document.querySelector('.btn-close').addEventListener('click', closeCustomModal);
    
    // Handle the "Next" button click
    next.addEventListener("click", function () {
        // Check if all conditions are matched
        const allMatched = matchedPosCount === posValues.filter(posValue => posValue !== null).length;
        if (allMatched) {
            closeCustomModal(); // Close the modal
            proceedToRecipeSettings(); // Open submenu for recipe settings
        } else {
            alert("Please match all POS values first.");
        }
    });

    function toggleRecipePopup() {
        const popup = document.getElementById("recipe-popup");
        popup.style.display = popup.style.display === "block" ? "none" : "block";
    }
    // Function to close the popup when clicking outside or on the close button
function closePopup(event) {
    const popup = document.getElementById("recipe-popup");
    const popupContent = document.querySelector(".popup-content");

    // If the clicked target is the popup background (not the content), close the popup
    if (event.target === popup) {
        popup.style.display = "none";
    }
}
// Attach event listener to the document to detect clicks outside the popup content
document.addEventListener('click', closePopup);

// Close popup when the close button is clicked
document.querySelector('.close-button').addEventListener('click', function() {
    toggleRecipePopup();
});
    function proceedToRecipeSettings() {
        toggleRecipePopup();
    }
  
   document.getElementById("final_submit").addEventListener('click', function () {
    // Node ID and value for starting the recipe
    const recipeNodeId = 'ns=3;s="dbRecipe"."Recipe"."decoilerSelection"[13]'; // Replace with actual node ID
    const recipeValue = True; // Value to write to the recipe start node

    // Node ID and value for quantity
    // const quantityNodeId = 200; // Replace with actual quantity node ID
    let quantityValue = document.getElementById("quantity").value; // Get user input for quantity
    quantityValue = parseInt(quantityValue, 10); // Convert to integer
    // if (!quantityValue || isNaN(quantityValue) || quantityValue <= 0) {
    //     alert('Please enter a valid quantity.');
    //     return;
    // }
   
    // Send both write requests to the server
    const requests = [
        fetch('/writeValue', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ nodeId: recipeNodeId, value: recipeValue }),
        }),
        // fetch('/writeValue', {
        //     method: 'POST',
        //     headers: { 'Content-Type': 'application/json' },
        //     body: JSON.stringify({ nodeId: quantityNodeId, value: quantityValue }),
        // }),
    ];

    // Handle the responses
    Promise.all(requests)
        .then(responses => Promise.all(responses.map(res => res.json())))
        .then(dataArray => {
            const recipeResponse = dataArray[0];
            // const quantityResponse = dataArray[1];

            if (recipeResponse.success) {
                alert('Recipe started successfully and quantity set!');
                // Close the popup if everything is set properly
                toggleRecipePopup();
            } else {
                let errorMessage = 'Errors occurred:\n';
                if (!recipeResponse.success) {
                    errorMessage += `- Starting recipe: ${recipeResponse.error}\n`;
                }
                // if (!quantityResponse.success) {
                //     errorMessage += `- Setting quantity: ${quantityResponse.error}\n`;
                // }
                alert(errorMessage);
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while starting the recipe or setting the quantity.');
        });
});

    });
    function loadRecipeSettings(recipeId) {
    fetch(`/api/sub_menu/${recipeId}`)
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert(data.error);
            } else {
                document.getElementById("recipeId").value = data.Recipe_ID || "";
document.getElementById("motor-speed").value = data.motor_speed || "";
document.getElementById("motor-stroke").value = data.motor_stroke || "";
document.getElementById("speed-force").value = data.other_speed_force || "";
document.getElementById("coil-width").value = data.alu_coil_width || "";
document.getElementById("corr1-feed-length").value = data.corr1_feed_length || "";
document.getElementById("corr2-feed-length").value = data.corr2_feed_length || "";
document.getElementById("pleat-height").value = data.pleat_height || "";
document.getElementById("blade-opening").value = data.blade_opening || "";
document.getElementById("left-blade-media-thickness").value = data.left_blade_media_thickness || "";
document.getElementById("right-blade-media-thickness").value = data.right_blade_media_thickness || "";
document.getElementById("soft-touch").value = data.soft_touch || "";
document.getElementById("press-touch").value = data.press_touch || "";
document.getElementById("puller-start-pos").value = data.puller_start_pos || "";
document.getElementById("puller-end-pos").value = data.puller_end_pos || "";
document.getElementById("puller2-feed-correction").value = data.puller2_feed_correction || "";
document.getElementById("filter-box-height").value = data.filter_box_height || "";
document.getElementById("filter-box-width").value = data.filter_box_width || "";
document.getElementById("filter-box-length").value = data.filter_box_length || "";
document.getElementById("set-pleat-count").value = data.set_pleat_count || "";
document.getElementById("set-pleat-pitch").value = data.set_pleat_pitch || "";
document.getElementById("set-batch-count").value = data.set_batch_count || "";
document.getElementById("machine-speed-ref").value = data.machine_speed_ref || "";
document.getElementById("decoiler-set-point").value = data.decoiler_set_point || "";
document.getElementById("low-dia-set").value = data.low_dia_set || "";
document.getElementById("cutter-park-pos").value = data.cutter_park_pos || "";
document.getElementById("cutter-fwd-pos").value = data.cutter_fwd_pos || "";

            }
        })
        .catch(error => {
            console.error("Error fetching submenu data:", error);
            alert("Failed to load submenu data.");
        });
}
function startRecipe(recipeId) {
    const quantity = document.getElementById("quantity").value.trim(); // Trim to remove spaces

    // // Validate quantity (should not be empty, NaN, or <= 0)
    // if (!quantity || isNaN(quantity) || Number(quantity) <= 0) {
    //     alert("Please enter a valid positive quantity.");
    //     return;
    // }

    // Send data to the backend using a POST request
    fetch(`/start_recipe/${recipeId}`, {
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({ quantity: quantity }),
    })
    .then((response) => response.json()) // Parse JSON response
    .then((data) => {
        if (data.error) {
            alert(`Error by shreyash: ${data.error}`); // Show error from backend
        } else {
            alert("Recipe started successfully! Batch Code: " + data.batch_code);
            // toggleRecipePopup(); // Close popup after success
        }
    })
    .catch((error) => {
        console.error("Error:", error);
        alert("An unexpected error occurred.");
    });
}


</script>
<style>

    /* Custom Modal Styles */
    .custom-modal {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 190;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
        backdrop-filter: blur(5px); /* Blur effect for the background */
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .custom-modal-content {
        background-color: #e7e1e9;
        border-radius: 10px;
        margin-left: 38%;
        margin-top: 2%;
        width: 400px;
        padding: 20px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        position: relative;
    }
    
    .custom-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .custom-modal-header h3 {
        margin: 0;
        font-size: 18px;
    }
    
    .btn-close {
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
    }
    
    .custom-modal-body {
        margin-bottom: 15px;
    }
    
    .list-group {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    
    .list-group li {
        padding: 10px;
        border-bottom: 1px solid #ccc;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }
    
    .custom-modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }
    
    .btn-secondary,
    .btn-primary {
        padding: 8px 16px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
    
    .btn-secondary {
        background-color: #6c757d;
        color: white;
    }
    
    .btn-primary {
        background-color: #007bff;
        color: white;
    }
    
    .btn-primary:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }
    
    /* Popup Styles */
    .popup {
        display: none; /* Hidden by default */
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
        backdrop-filter: blur(5px); /* Blur effect for the background */
        z-index: 1000;
        justify-content: center;
        align-items: center;
    }
    
    .popup-content {
        background-color: #e7e1e9;
        border-radius: 10px;
        width: 1000px;
        padding: 10px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        position: relative;
    }
    
    .popup-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }
    
    .popup-header h3 {
        margin: 0;
        font-size: 18px;
    }
    .start-button {
        background-color: #28a745; /* Green background */
        color: white; /* White text */
        font-size: 16px;
        font-weight: bold;
        padding: 10px 20px;
        border: none;
        margin-top: 1%;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
    }
    
    .start-button:hover {
        background-color: #218838; /* Darker green on hover */
        transform: scale(1.05); /* Slight zoom effect */
    }
    
    .start-button:active {
        background-color: #1e7e34; /* Even darker green when clicked */
        transform: scale(0.95); /* Button press effect */
    }
    .details-table {
        border-collapse: collapse;
        width: 100%;
        text-align: center; /* Centers text horizontally */
    }
    
    .details-table th, .details-table td {
        padding: 4px; /* Reduces spacing */
        white-space: nowrap; /* Prevents text from wrapping */
        text-align: center; /* Centers text horizontally */
        vertical-align: middle; /* Centers text vertically */
        border: 1px solid black; /* Adds border for clarity */
    }
    </style>
{% endblock %}
